#!/usr/bin/env php
<?php

if (file_exists(__DIR__.'/../../../autoload.php')) {
    require __DIR__.'/../../../autoload.php';
} else {
    require __DIR__.'/../vendor/autoload.php';
}

$source = new Glossarize\Analysis\Source('*');
$config = new Glossarize\Analysis\Config($source);

try {
    include_once getcwd() . '/glossarize.config.php';
} catch (Throwable $error) {
    echo "Glossarize: Config file error\n";
    echo "  > " . $error->getMessage() . " on " . $error->getFile() . " line " . $error->getLine() . "\n";
    exit(1);
}

$app = new Glossarize\Console\Application($config);

$defaultCommand = new Glossarize\Console\Commands\DefaultCommand;

$app->add($defaultCommand);
$app->setDefaultCommand($defaultCommand->getName());

$app->add(new Glossarize\Console\Commands\CheckCommand);
#$app->add(new Glossarize\Console\Commands\NewCommand);
#$app->add(new Glossarize\Console\Commands\FetchCommand);
#$app->add(new Glossarize\Console\Commands\InstallCommand);

$app->run();
